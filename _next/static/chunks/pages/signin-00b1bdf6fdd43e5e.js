(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{87752:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return t(37232)}])},37232:function(e,s,t){"use strict";t.r(s);var n=t(85893),o=t(67294),a=t(77167),l=t(11163);s.default=()=>{let e=(0,l.useRouter)(),[s,t]=(0,o.useState)(""),[r,c]=(0,o.useState)(""),[u,i]=(0,o.useState)(""),[d,f]=(0,o.useState)(""),[m,h]=(0,o.useState)(!1),w=new a.AM({UserPoolId:"eu-west-1_NM5fCJdZO",ClientId:"3bur18a8itsqiolejoc6hibl9m"});async function g(e,s){let t=new a.sD({Username:e,Password:s}),n=new a.ws({Username:e,Pool:w});n.authenticateUser(t,{onSuccess:e=>{let s=e.getAccessToken().getJwtToken();console.log("token, authentication -->",s),f(s)},onFailure:e=>{console.log("Error retrieving access token:",e)}})}(0,o.useEffect)(()=>{""!==d&&e.push("/companysettings?user=".concat(s,"&access_token=").concat(d))},[d]),(0,o.useEffect)(()=>{(async function(){!0==m&&await g(s,r)})()},[m]);let p=()=>{e.push("/index",void 0,{shallow:!0,state:{from:"currentPage"}})};return(0,o.useEffect)(()=>{let e=e=>{e.state&&"previousPage"===e.state.from&&(console.log("User clicked the back button"),p())};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[]),(0,n.jsx)("div",{className:"bg-gray-200 h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"max-w-md bg-white p-8 rounded shadow-md",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Login"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new a.sD({Username:s,Password:r}),n=new a.ws({Username:s,Pool:w});n.authenticateUser(t,{onSuccess:()=>{console.log("Login successful");try{h(!0)}catch(e){console.log("Error:",e)}},onFailure:e=>{i(e.message||"An error occurred during login")}})},className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"username",className:"text-gray-700 font-bold mb-2",children:"Company name"}),(0,n.jsx)("input",{type:"text",id:"username",value:s,onChange:e=>t(e.target.value),className:"input-field"})]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"password",className:"text-gray-700 font-bold mb-2",children:"Password"}),(0,n.jsx)("input",{type:"password",id:"password",value:r,onChange:e=>c(e.target.value),className:"input-field"})]}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Log In"}),u&&(0,n.jsx)("p",{children:u})]})]})})}},56249:function(){}},function(e){e.O(0,[764,569,774,888,179],function(){return e(e.s=87752)}),_N_E=e.O()}]);