(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(7242)}])},7242:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return ProfilePage}});var s=t(5893),n=t(6808),a=t.n(n),o=t(9499),i=t(7294),r=t(9830),c=t.n(r);function FormField(e){let{label:l,_type:t,value:n}=e;return(0,s.jsx)("div",{className:"w-3/4",children:(0,s.jsx)("div",{className:"mb-2 block",children:(0,s.jsx)(o.Z,{id:l,label:l,variant:"filled",value:n,className:"my-2"})})})}function ProfileForm(){let[e,l]=(0,i.useState)({"custom:VATnumber":"","custom:location":"","custom:typeOfCompany":"",name:"",email:""});return(0,i.useEffect)(()=>{let e=a().get("idToken");l(function(e){let[l,t,s]=e.split("."),decodeBase64Url=e=>{let l=e.replace(/-/g,"+").replace(/_/g,"/");return atob(l)},parseJSON=e=>{try{return JSON.parse(e)}catch(e){return console.error("Invalid JSON:",e),null}},n=parseJSON(decodeBase64Url(l)),a=parseJSON(decodeBase64Url(t));return{header:n,payload:a,signature:s}}(e).payload)},[]),(0,s.jsx)("form",{className:"my-4 flex w-5/6 justify-between bg-white rounded-lg",children:(0,s.jsxs)("div",{className:"flex-col w-full h-full justify-between",children:[(0,s.jsxs)("div",{className:"mx-4 flex w-full justify-between",children:[(0,s.jsxs)("div",{className:"mx-4 flex-col w-full",children:[(0,s.jsx)(FormField,{type:"text",label:"Nome societ\xe0/Freelance",value:e.name}),(0,s.jsx)(FormField,{type:"text",label:"Email",value:e.email}),(0,s.jsx)(FormField,{type:"text",label:"Location",value:e["custom:location"]})]}),(0,s.jsxs)("div",{className:"mx-4 flex-col w-full",children:[(0,s.jsx)(FormField,{type:"text",label:"Ragione sociale",value:e["custom:typeOfCompany"]}),(0,s.jsx)(FormField,{type:"text",label:"Partita IVA",value:e["custom:VATnumber"]}),(0,s.jsx)(FormField,{type:"password",label:"Password"})]})]}),(0,s.jsx)("div",{className:"flex my-8 mx-4 justify-end",children:(0,s.jsx)("button",{type:"submit",className:"text-white bg-[#16DBCC] focus:ring-4 focus:outline-none font-medium rounded-full px-5 py-2.5 text-center ".concat(c().className," text-[20px]"),children:"Salva"})})]})})}var u=t(6738),d=t(9417),f=t(7152),m=t(4597),p=t(6837),x=t(892);let g=(0,m.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function ProfilePic(){let e=a().get("accessToken"),[l,t]=(0,i.useState)("");return(0,i.useEffect)(()=>{(async function(){if(""===l){let l=await (0,x.dV)(e);null!==l&&""!==l&&(console.log("myImage = ",l),t(l))}})()},[]),(0,s.jsxs)("div",{className:"flex-col",children:[(0,s.jsx)("img",{src:l,className:"rounded-full"}),(0,s.jsxs)(d.Z,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:(0,s.jsx)(f.Z,{}),children:["Upload files",(0,s.jsx)(g,{type:"file",onChange:l=>{console.log(l.target.files);let s=l.target.files[0];!function(l){if(void 0==l){console.log("Error: file undefined");return}if(!(l instanceof File)&!(l instanceof Blob)){console.log("Error: file must be of type File or Blob");return}let s=new FileReader;s.onload=function(){let n={};n.filename=l.name;let a=s.result,o=a.split(";base64,")[1];n.imageAsBase64String=o,n.metadata={"Content-Type":"image/png"};let i=new XMLHttpRequest;i.open("POST",API_URL+"/img",!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Authorization","Bearer "+e),i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE&&200===i.status){let e=JSON.parse(i.responseText);"Success"==e.result?(console.log("Uploaded"),void 0!==t&&t([e.img_url])):console.log("failed to upload")}},i.send(JSON.stringify(n))},s.readAsDataURL(l)}(s)},multiple:!0})]})]})}function ProfilePage(){return(0,s.jsx)(u.default,{component:(0,s.jsxs)("div",{className:"my-4 mx-4 flex w-3/4",children:[(0,s.jsx)("div",{className:"my-4 bg-white w-1/4",children:(0,s.jsx)(ProfilePic,{})}),(0,s.jsx)("div",{className:"my-4 bg-white w-3/4",children:(0,s.jsx)(ProfileForm,{})})]}),selected:p.g.Accounts})}}},function(e){e.O(0,[741,973,339,738,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);