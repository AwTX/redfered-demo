(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return n(4192)}])},4192:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return ProfilePage}});var t=n(5893),o=n(7262),a=n(8593),s=n(7294),i=n(9830),r=n.n(i),c=n(6808),d=n.n(c);function FormField(e){let{label:l,value:n}=e;return(0,t.jsx)("div",{className:"w-3/4",children:(0,t.jsx)("div",{className:"mb-2 block",children:(0,t.jsx)(a.Z,{id:l,label:l,variant:"filled",value:n,className:"my-2"})})})}function ProfileForm(){let[e,l]=(0,s.useState)({"custom:VATnumber":"","custom:location":"","custom:typeOfCompany":"",name:"",email:""});return(0,s.useEffect)(()=>{let e=d().get("idToken"),n=function(e){if(void 0===e)return console.log("token undefined"),null;let[l,n,t]=e.split("."),decodeBase64Url=e=>{let l=e.replace(/-/g,"+").replace(/_/g,"/");return atob(l)},parseJSON=e=>{try{return JSON.parse(e)}catch(e){return console.error("Invalid JSON:",e),null}},o=parseJSON(decodeBase64Url(l)),a=parseJSON(decodeBase64Url(n));return{header:o,payload:a,signature:t}}(e);if(null===n){console.log("decodedToken null");return}if(void 0===n.payload){console.log("decodedToken undefined");return}l(n.payload)},[]),(0,t.jsx)("form",{className:"my-4 flex w-5/6 justify-between bg-white rounded-lg",children:(0,t.jsxs)("div",{className:"flex-col w-full h-full justify-between",children:[void 0===e?null:(0,t.jsxs)("div",{className:"mx-4 flex w-full justify-between",children:[(0,t.jsxs)("div",{className:"mx-4 flex-col w-full",children:[(0,t.jsx)(FormField,{label:"Nome societ\xe0/Freelance",value:e.name}),(0,t.jsx)(FormField,{label:"Email",value:e.email}),(0,t.jsx)(FormField,{label:"Location",value:e["custom:location"]})]}),(0,t.jsxs)("div",{className:"mx-4 flex-col w-full",children:[(0,t.jsx)(FormField,{label:"Ragione sociale",value:e["custom:typeOfCompany"]}),(0,t.jsx)(FormField,{label:"Partita IVA",value:e["custom:VATnumber"]}),(0,t.jsx)(FormField,{label:"Password"})]})]}),(0,t.jsx)("div",{className:"flex my-8 mx-4 justify-end",children:(0,t.jsx)("button",{type:"submit",className:"text-white bg-[#16DBCC] focus:ring-4 focus:outline-none font-medium rounded-full px-5 py-2.5 text-center ".concat(r().className," text-[20px]"),children:"Salva"})})]})})}var u=n(7459),m=n(6837),f=n(5697),p=n.n(f),x=n(9676),h=n(44),b=n(323),g=n(4597),j=n(9417),v=n(7152),y=n(1002),w=n(5450),N=n(9007),F=n(892);let P=(0,g.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function StandardImageList(e){let{data:l}=e;return(console.log(l),console.log("data type: ",typeof l),void 0===l||0===l.length)?(0,t.jsx)("div",{}):(0,t.jsx)(w.Z,{sx:{width:500,height:450},cols:3,rowHeight:200,children:l.map(e=>(0,t.jsx)(N.Z,{children:(0,t.jsx)("img",{srcSet:"".concat(e,"?w=164&h=164&fit=crop&auto=format&dpr=2 2x"),src:"".concat(e,"?w=164&h=164&fit=crop&auto=format"),alt:e,loading:"lazy"})},e))})}function InputFileUpload(){let e=d().get("accessToken"),[l,n]=(0,s.useState)([]);return(0,s.useEffect)(async()=>{let l=await (0,F.dV)(e);console.log("[img_url] =",[l]),n([l])},[]),(0,t.jsxs)("div",{children:[(0,t.jsx)(StandardImageList,{data:l}),(0,t.jsxs)(j.Z,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:(0,t.jsx)(v.Z,{}),children:["Upload files",(0,t.jsx)(P,{type:"file",onChange:l=>{console.log(l.target.files);let t=l.target.files[0];!function(l){if(void 0==l){console.log("Error: file undefined");return}if(!(l instanceof File)&!(l instanceof Blob)){console.log("Error: file must be of type File or Blob");return}let t=new FileReader;t.onload=function(){let o={};o.filename=l.name;let a=t.result,s=a.split(";base64,")[1];o.imageAsBase64String=s,o.metadata={"Content-Type":"image/png"};let i=new XMLHttpRequest;i.open("POST",y.T5+"/img",!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Authorization","Bearer "+e),i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE&&200===i.status){let e=JSON.parse(i.responseText);"Success"==e.result?(console.log("Uploaded"),n([e.img_url])):console.log("failed to upload")}},i.send(JSON.stringify(o))},t.readAsDataURL(l)}(t)},multiple:!0})]})]})}function BasicTabs(){let[e,l]=s.useState(0);function a11yProps(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function CustomTabPanel(e){let{children:l,value:n,index:o}=e;return console.log("children =",l),console.log("value=",n),console.log("index=",o),(0,t.jsx)("div",{role:"tabpanel",hidden:n!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),children:n===o&&(0,t.jsx)(b.Z,{sx:{p:3},children:l})})}return CustomTabPanel.propTypes={children:p().node,index:p().number.isRequired,value:p().number.isRequired},(0,t.jsxs)(b.Z,{sx:{width:"100%"},children:[(0,t.jsx)(b.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,t.jsxs)(x.Z,{value:e,onChange:(e,n)=>{console.log("_e =",e),console.log("newValue =",n),l(n)},"aria-label":"basic tabs example",children:[(0,t.jsx)(h.Z,{label:"Profilo",...a11yProps(0),className:"".concat(r().className)}),(0,t.jsx)(h.Z,{label:"Logo",...a11yProps(1),className:"".concat(r().className)})]})}),(0,t.jsx)(CustomTabPanel,{value:e,index:0,children:(0,t.jsx)(function(){return(0,t.jsxs)("div",{className:"my-4 mx-4 flex w-3/4",children:[(0,t.jsx)("div",{className:"my-4 bg-white w-1/6",children:(0,t.jsx)(o.Z,{className:"flex"})}),(0,t.jsx)(ProfileForm,{})]})},{})}),(0,t.jsx)(CustomTabPanel,{value:e,index:1,children:(0,t.jsx)(InputFileUpload,{})})]})}function ProfilePage(){return(0,t.jsx)(u.default,{component:(0,t.jsx)(BasicTabs,{}),selected:m.g.Accounts})}}},function(e){e.O(0,[741,79,668,459,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);