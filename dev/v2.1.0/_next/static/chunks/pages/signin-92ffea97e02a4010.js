(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{7752:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return s(6761)}])},1002:function(e,t,s){"use strict";s.d(t,{Mr:function(){return l},Rf:function(){return o},T5:function(){return n}});let n="https://bs1a7ie37i.execute-api.eu-west-1.amazonaws.com/prod",o="eu-west-1_AfZKtqHom",l="1bshmkjde5rb1011amu8d0996i"},6761:function(e,t,s){"use strict";s.r(t);var n=s(5893),o=s(7294),l=s(7167),a=s(1163),c=s(1002),r=s(6808),i=s.n(r);t.default=()=>{let e=(0,a.useRouter)(),[t,s]=(0,o.useState)(""),[r,u]=(0,o.useState)(""),[d,m]=(0,o.useState)(""),[f,h]=(0,o.useState)(""),[g,w]=(0,o.useState)(""),[p,x]=(0,o.useState)(!1),b={UserPoolId:c.Rf,ClientId:c.Mr},k=new l.AM(b);async function getAccessToken(e,t){let s=new l.sD({Username:e,Password:t}),n=new l.ws({Username:e,Pool:k});n.authenticateUser(s,{onSuccess:e=>{let t=e.getAccessToken().getJwtToken(),s=e.getIdToken().getJwtToken();console.log("access token, authentics token, authenticaation -->",t),console.log("id token, authentication -->",s),h(t),w(s)},onFailure:e=>{console.log("Error retrieving access token:",e)}})}return(0,o.useEffect)(()=>{if(""==f||null==f||void 0==f||""==g||null==g||void 0==g||""==t||null==t||void 0==t)return;console.log("loginName: ",t),console.log("accesstToken: ",f),console.log("idToken: ",g),i().set("accessToken",f,{secure:!0,sameSite:"strict"}),i().set("idToken",g,{secure:!0,sameSite:"strict"});let s=function(e){let t=e.split(".");if(3!==t.length)return;let s=t[1],n=atob(s.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(n)}(g);console.log("payload: ",s),e.push("/mgmt?user=".concat(s["cognito:username"]))},[f,g,t]),(0,o.useEffect)(()=>{(async function(){!0==p&&await getAccessToken(t,r)})()},[p]),(0,n.jsx)("div",{className:"bg-[url(./../public/bg.png)] h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"max-w-md rounded shadow-md",children:[(0,n.jsx)("h1",{className:"text-white text-2xl font-bold mb-4",children:"Login"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=new l.sD({Username:t,Password:r}),n=new l.ws({Username:t,Pool:k});n.authenticateUser(s,{onSuccess:()=>{console.log("Login successful");try{x(!0)}catch(e){console.log("Error:",e)}},onFailure:e=>{m(e.message||"An error occurred during login")}})},className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"username",className:"text-white font-bold mb-2",children:"Company name or email"}),(0,n.jsx)("input",{type:"text",id:"username",value:t,onChange:e=>s(e.target.value),className:"input-field"})]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"password",className:"text-white font-bold mb-2",children:"Password"}),(0,n.jsx)("input",{type:"password",id:"password",value:r,onChange:e=>u(e.target.value),className:"input-field"})]}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Log In"}),(0,n.jsx)("label",{className:"text-white font-bold mb-2",children:d&&(0,n.jsx)("p",{children:d})})]})]})})}},6249:function(){}},function(e){e.O(0,[690,167,774,888,179],function(){return e(e.s=7752)}),_N_E=e.O()}]);