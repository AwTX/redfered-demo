(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[393],{87167:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin-by-plugin",function(){return t(49813)}])},56567:function(e,n,t){"use strict";t.d(n,{Mr:function(){return r},Rf:function(){return o},T5:function(){return s}});let s="https://e129bp3r31.execute-api.eu-west-1.amazonaws.com/prod",o="eu-west-1_0xawMsGty",r="7b30d5nqk0gech4bec45dchalf"},49813:function(e,n,t){"use strict";t.r(n);var s=t(85893),o=t(67294),r=t(56567),a=t(77167),c=t(11163);n.default=()=>{let e=(0,c.useRouter)(),[n,t]=(0,o.useState)(""),[l,u]=(0,o.useState)(""),[i,d]=(0,o.useState)(""),[f,h]=(0,o.useState)(!1),w={UserPoolId:r.Rf,ClientId:r.Mr},m=new a.AM(w);async function g(n,t){let s=new a.sD({Username:n,Password:t}),o=new a.ws({Username:n,Pool:m});o.authenticateUser(s,{onSuccess:n=>{let t=n.getIdToken().payload,s=t["cognito:username"],o=n.getAccessToken().getJwtToken();console.log("Username:",s),console.log("Here is your Access Token: ",o);let{query:r}=e,{referrer:a}=r;if(null==a){console.log("Inside useEffect with referrer null or undefined. Returning");return}!function(e,n){console.log("Called 'redirectBackWithToken' function!");let t="".concat(e),s=new XMLHttpRequest;s.open("GET",t,!0),s.setRequestHeader("Authorization","Bearer ".concat(n)),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&(200===s.status?(console.log("Succesfully redirected back with token: ",n),window.location.href=t):console.error("Error redirecting back. xhr.status = ",s.status))},s.send()}(a,o)},onFailure:e=>{console.log("Error retrieving access token:",e)}})}return(0,o.useEffect)(()=>{(async function(){!0==f&&await g(n,l)})()},[f]),(0,s.jsx)("div",{className:"bg-[url(./../public/bg.png)] h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"max-w-md rounded shadow-md",children:[(0,s.jsx)("h1",{className:"text-white text-2xl font-bold mb-4",children:"Login"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new a.sD({Username:n,Password:l}),s=new a.ws({Username:n,Pool:m});s.authenticateUser(t,{onSuccess:()=>{console.log("Login successful");try{h(!0)}catch(e){console.log("Error:",e)}},onFailure:e=>{d(e.message||"An error occurred during login")}})},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{htmlFor:"username",className:"text-white font-bold mb-2",children:"Company name"}),(0,s.jsx)("input",{type:"text",id:"username",value:n,onChange:e=>t(e.target.value),className:"input-field"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{htmlFor:"password",className:"text-white font-bold mb-2",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password",value:l,onChange:e=>u(e.target.value),className:"input-field"})]}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Log In"}),i&&(0,s.jsx)("p",{children:i})]})]})})}},56249:function(){}},function(e){e.O(0,[764,569,774,888,179],function(){return e(e.s=87167)}),_N_E=e.O()}]);