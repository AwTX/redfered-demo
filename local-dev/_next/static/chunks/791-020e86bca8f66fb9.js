(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{6808:function(e,t,r){var n,o,s;void 0!==(o="function"==typeof(n=s=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function s(t,r,s){if("undefined"!=typeof document){"number"==typeof(s=e({path:"/"},o.defaults,s)).expires&&(s.expires=new Date(new Date*1+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var l in s)s[l]&&(c+="; "+l,!0!==s[l]&&(c+="="+s[l].split(";")[0]));return document.cookie=t+"="+r+c}}function a(e,r){if("undefined"!=typeof document){for(var o={},s=document.cookie?document.cookie.split("; "):[],a=0;a<s.length;a++){var c=s[a].split("="),l=c.slice(1).join("=");r||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var i=t(c[0]);if(l=(n.read||n)(l,i)||t(l),r)try{l=JSON.parse(l)}catch(e){}if(o[i]=l,e===i)break}catch(e){}}return e?o[e]:o}}return o.set=s,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,r){s(t,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}(function(){})})?n.call(t,r,t,e):n)&&(e.exports=o),e.exports=s()},6567:function(e,t,r){"use strict";r.d(t,{T5:function(){return n}});let n="http://127.0.0.1:5000"},7753:function(e,t,r){"use strict";r.d(t,{$J:function(){return c},Dd:function(){return i},EG:function(){return l},Xh:function(){return h},ac:function(){return o},i9:function(){return u},oT:function(){return a},py:function(){return f},r0:function(){return s},xc:function(){return d}});var n=r(6567);async function o(e){let t=await fetch(n.T5+"/invitationcode?code="+e),r=await t.json(),o=JSON.parse(r.body);return o}async function s(e){let t=await fetch(n.T5+"/?user="+e),r=await t.json(),o=JSON.parse(r.body);return o.filenames}async function a(){let e=await fetch(n.T5+"/poolusers"),t=await e.json();console.log("[API] users json",t);let r=JSON.parse(t.body);return console.log("[API] users body",r),r.users}async function c(e){let t=await fetch(n.T5+"/mylogo?user="+e),r=await t.json(),o=JSON.parse(r.body);return o.imageUrl}async function l(e){let t=await fetch(n.T5+"/contracts?user="+e),r=await t.json();console.log("api_getContracts() returned:",r);let o=JSON.parse(r.body);return console.log("api_getContracts() body:",o),o}async function i(e,t,r){let o=await fetch(n.T5+"/showincarousel?user="+e,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(t)}),s=await o.json(),a=JSON.parse(s.body);return a}async function d(e,t,r){let o=await fetch(n.T5+"/sendrequests?user="+e,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(t)}),s=await o.json(),a=JSON.parse(s.body);return a}async function u(e,t,r){let o=await fetch(n.T5+"/acceptrequests?user="+e,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(t)}),s=await o.json(),a=JSON.parse(s.body);return a}async function f(e,t){let r=await fetch(n.T5+"/update_contractText?user="+e,{method:"POST",mode:"cors",body:JSON.stringify(t)}),o=await r.json(),s=JSON.parse(o.body);return s}async function h(e,t){let r=await fetch(n.T5+"/send_contractText?user="+e,{method:"POST",mode:"cors",body:JSON.stringify(t)}),o=await r.json(),s=JSON.parse(o.body);return s}},6791:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(5893),o=r(7294),s=r(1664),a=r.n(s),c=r(6808),l=r.n(c),i=r(7753),d=r(1163);function u(){let e=(0,d.useRouter)(),t=e.query.user;l().get("accessToken");let[r,s]=(0,o.useState)([]),[c,u]=(0,o.useState)(0),[f,h]=(0,o.useState)([]),[x,p]=(0,o.useState)(""),[g,b]=(0,o.useState)(0),[y,m]=(0,o.useState)([]),[w,j]=(0,o.useState)("YourContracts");async function v(e){if(e.preventDefault(),console.log("contractsAsTable=",f),null==document){console.log("document null");return}if(null==document.getElementById("contractTextId")){console.log('document.getElementById("contractTextId") null');return}if(null==document.getElementById("contractTextId").value){console.log('document.getElementById("contractTextId").value null');return}let r=document.getElementById("contractTextId").value,n={partner:f[c].partner,contractText:r},o=await (0,i.py)(t,n);"Success"==o.result&&(f[c].contractText=r,h(f)),console.log("just called api_update_contractText with data = ",n),console.log("res=",o)}async function T(e){if(e.preventDefault(),console.log("contractsAsTable=",f),null==document){console.log("document null");return}if(null==document.getElementById("contractTextId")){console.log('document.getElementById("contractTextId") null');return}if(null==document.getElementById("contractTextId").value){console.log('document.getElementById("contractTextId").value null');return}let r=document.getElementById("contractTextId").value;console.log("[DEBUG] selectedRowInvite: ",g),console.log("[DEBUG] invitationsTable[selectedRowInvite]: ",y[g]);let n={partner:y[g],contractText:r},o=await (0,i.Xh)(t,n);"Success"==o.result&&(f.push({partner:n.partner,contractText:n.contractText,accepted:!1,showInCarousel:!1}),y.splice(g,1),m(y),h(f),p("")),console.log("just called api_update_contractText with data = ",n),console.log("res=",o)}function I(e){let{cacheText:t}=e;return(0,n.jsx)("textArea",{autofocus:!0,style:{width:"80%",height:"80%"},id:"contractTextId",className:"input-field",children:t})}(0,o.useEffect)(()=>{console.log("[useEffect] invitationsTable: ",y)},[y]),(0,o.useEffect)(()=>{if(console.log("[useEffect(contractsAsTable, poolUsers)]"),0==f.length){m(r.filter(e=>e!==t));return}if(void 0!==t){let e;console.log("contractsAsTable = ",f),p(f[c].contractText);let t=(e=f.map(e=>e.partner),r.filter(t=>!e.includes(t)));console.log("_invitationsTable = ",t),m(t)}else console.log("user is undefined!")},[f,r]),(0,o.useEffect)(()=>{(async function(){if(void 0!==t){let e=await (0,i.EG)(t);h(function(e){console.log("to table:",e);let t=[];if(null==e)return t;if(null!==e.incomeRequests){let r=e.incomeRequests;Object.keys(r).forEach(e=>{t.push({partner:e,inOut:!0,accepted:r[e].accepted,showInCarousel:!1,contractText:r[e].contractText})})}if(null!==e.outcomeRequests){let r=e.outcomeRequests;Object.keys(r).forEach(e=>{t.push({partner:e,inOut:!1,accepted:r[e].accepted,showInCarousel:r[e].showInCarousel,contractText:r[e].contractText})})}return t}(e));let r=await (0,i.oT)();console.log("poolusers = ",r),s(r)}else console.log("user is undefined!")})()},[t]);let k=(e,t,r)=>{e.stopPropagation(),f[t][r]=!f[t][r],u(t),h(f)},C=e=>{u(e),p(f[e].contractText)},N=e=>{b(e)};function S(e){let{selectedRow:r,contractsAsTable:o}=e;return(0,n.jsxs)("table",{id:"ID_YourContractsTable",className:"border border-purple-400",style:{width:"80%",height:"80%",overflowX:"auto",overflowY:"auto"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border border-violet-600",children:[(0,n.jsx)("th",{className:"border border-gray-400 px-4 py-2"}),(0,n.jsx)("th",{className:"border border-gray-400 px-4 py-2",children:"Partner"}),(0,n.jsx)("th",{className:"border border-gray-400 px-4 py-2",children:"Accepted"}),(0,n.jsx)("th",{className:"border border-gray-400 px-4 py-2",children:"Preview"})]})}),(0,n.jsx)("tbody",{children:o.map((e,s)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"border border-gray-400 px-4 py-2",children:(0,n.jsx)("label",{className:"relative inline-flex items-center cursor-pointer",children:(0,n.jsx)("img",{src:e.inOut?"./income-arrow.svg":"./outcome-arrow.svg",alt:e.inOut?"Income":"Outcome",style:{maxWidth:"66px",maxHeight:"66px"}})})}),(0,n.jsx)("td",{className:"cursor-pointer ".concat(r===s?"border border-gray-400 px-4 py-2 text-center bg-blue-200":"border border-gray-400 px-4 py-2 text-center"),onClick:()=>C(s),children:e.partner}),(0,n.jsx)("td",{className:"border border-gray-400 px-4 py-2 text-center",children:(0,n.jsx)("label",{className:"relative inline-flex items-center cursor-pointer",children:(0,n.jsx)("input",{type:"checkbox",checked:e.accepted,className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",onChange:e=>k(e,s,"accepted")})})}),(0,n.jsx)("td",{children:(0,n.jsx)(a(),{href:{pathname:"/DemoPage",query:{user:t,partner:o[r].partner}},passHref:!0,children:(0,n.jsx)("a",{children:(0,n.jsx)("img",{src:"https://cdn4.iconfinder.com/data/icons/various-32x32-outline/32/share-512.png",alt:"Clickable Icon",style:{cursor:"pointer",maxwidth:"66px",maxheight:"66px"}})})})})]},s))})]})}function O(e){let{selectedRow:t,contractsAsTable:r}=e;return(0,n.jsxs)("table",{id:"ID_CarouselSettingsTable",className:"border border-purple-400 table-fixed w-1/2",style:{overflowX:"auto",overflowY:"auto"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border border-violet-600 w-full",children:[(0,n.jsx)("th",{className:"border border-gray-400 px-4 py-2 w-1/2",children:"Partner"}),(0,n.jsx)("th",{className:"border border-gray-400 px-4 py-2 w-1/2",children:"ShowInCarousel"})]})}),(0,n.jsx)("tbody",{children:r.map((e,r)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"cursor-pointer ".concat(t===r?"border border-gray-400 px-4 py-2 text-center bg-blue-200":"border border-gray-400 px-4 py-2 text-center"),onClick:()=>C(r),children:e.partner}),(0,n.jsx)("td",{className:"border border-gray-400 px-4 py-2 text-center",children:(0,n.jsx)("label",{className:"relative inline-flex items-center cursor-pointer",children:(0,n.jsx)("input",{type:"checkbox",checked:e.showInCarousel,className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",onChange:e=>k(e,r,"showInCarousel")})})})]},r))})]})}function E(e){let{selectedRowInvite:t,invitationsTable:r}=e;return(0,n.jsxs)("table",{id:"ID_InviteTable",className:"border border-purple-400",style:{width:"100%",height:"80%",overflowX:"auto",overflowY:"auto"},children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{className:"border border-violet-600",children:(0,n.jsx)("th",{className:"border border-gray-400 px-4 py-2",children:"Partner"})})}),(0,n.jsx)("tbody",{children:r.map((e,r)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{className:"cursor-pointer ".concat(t===r?"border border-gray-400 px-4 py-2 text-center bg-blue-200":"border border-gray-400 px-4 py-2 text-center"),onClick:()=>N(r),children:e})},r))})]})}return(0,n.jsxs)("div",{style:{position:"absolute",display:"flex",flexDirection:"column",height:"100%",width:"100%",alignItems:"center"},children:[(0,n.jsx)("img",{class:"absolute w-1 h-1 rounded-lg",src:"https://cdn-icons-png.freepik.com/256/16000/16000950.png?semt=ais_hybrid",alt:"image description"}),(0,n.jsx)("div",{style:{position:"relative",display:"flex",flex:1,flexGrow:1,width:"40%",height:"15%",justifyContent:"center",alignItems:"center",borderBottom:"3px solid #8a00ff"},children:(0,n.jsx)("img",{src:"./Redfered-7-9-2024.png",style:{height:"90%"}})}),(0,n.jsxs)("div",{class:"inline-flex rounded-md shadow-sm",role:"group",children:[(0,n.jsx)("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-s-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white",onClick:()=>j("YourContracts"),children:"Your Contracts"}),(0,n.jsx)("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white",onClick:()=>j("CarouselSettings"),children:"Carousel Settings"}),(0,n.jsx)("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-e-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 dark:focus:ring-blue-500 dark:focus:text-white",onClick:()=>j("Invite"),children:"Send invitation"})]}),(0,n.jsx)(function(e){let{selectedRow:t,contractsAsTable:r,isVisible:o,cacheText:s}=e;return o?(0,n.jsxs)("div",{style:{position:"relative",display:"flex",flex:2,flexGrow:4,flexDirection:"row",width:"75%",height:"70%",justifyContent:"center",alignItems:"center"},children:[(0,n.jsx)("div",{style:{flex:1,overflowX:"auto",overflowY:"auto",padding:"20px",width:"80%",height:"80%",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(S,{selectedRow:t,contractsAsTable:r})}),(0,n.jsx)("div",{style:{display:"flex",flex:1,flexDirection:"row",padding:"20px",width:"80%",height:"80%",justifyContent:"center",alignItems:"center"},children:(0,n.jsxs)("form",{onSubmit:v,className:"space-y-4",style:{display:"flex",flex:1,flexDirection:"column",width:"80%",height:"100%",justifyContent:"center",alignItems:"center"},children:[(0,n.jsx)(I,{id:"textfieldid",cacheText:s,style:{flex:1}}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",style:{width:"10%",height:"10%"},children:"Save"})]})})]}):null},{selectedRow:c,contractsAsTable:f,isVisible:"YourContracts"==w,cacheText:x}),(0,n.jsx)(function(e){let{contractsAsTable:t,isVisible:r}=e;return r?(0,n.jsx)("div",{style:{position:"relative",display:"flex",flex:2,flexGrow:4,flexDirection:"row",width:"75%",height:"70%",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)("div",{style:{display:"flex",flex:1,overflowX:"auto",overflowY:"auto",padding:"20px",width:"100%",height:"80%",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(O,{selectedRow:c,contractsAsTable:t})})}):null},{selectedRow:c,contractsAsTable:f,isVisible:"CarouselSettings"==w}),(0,n.jsx)(function(e){let{selectedRowInvite:t,invitationsTable:r,cacheText:o,isVisible:s}=e;return s?(0,n.jsxs)("div",{style:{position:"relative",display:"flex",flex:2,flexGrow:4,flexDirection:"row",width:"75%",height:"70%",justifyContent:"center",alignItems:"center"},children:[(0,n.jsx)("div",{style:{flex:1,overflowX:"auto",overflowY:"auto",padding:"20px",width:"80%",height:"80%",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(E,{selectedRowInvite:t,invitationsTable:r})}),(0,n.jsx)("div",{style:{display:"flex",flex:1,flexDirection:"row",padding:"20px",width:"80%",height:"80%",justifyContent:"center",alignItems:"center"},children:(0,n.jsxs)("form",{onSubmit:T,className:"space-y-4",style:{display:"flex",flex:1,flexDirection:"column",width:"80%",height:"100%",justifyContent:"center",alignItems:"center"},children:[(0,n.jsx)(I,{id:"invite-text-id",cacheText:o,style:{flex:1}}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",style:{width:"10%",height:"10%"},children:"Save"})]})})]}):null},{selectedRowInvite:g,invitationsTable:y,cacheText:x,isVisible:"Invite"==w})]})}}}]);